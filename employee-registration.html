<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Registration - Chesmi Groups IT</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .access-table td:nth-child(2), 
        .access-table td:nth-child(3) {
            width: 50px;
            text-align: center;
        }
    </style>
</head>
<body>

<form class="a4-page" id="registrationForm">
    <header>
        <div class="logo-container">
            <img src="chesmi-logo.png" alt="Chesmi Logo">
        </div>
        <h1>New Employee Registration for IT Department</h1>
    </header>

    <h2>Employee Information <span style="font-weight:400; font-size: 0.8em;">(To be completed by HR/HOD)</span></h2>
    <div class="form-group">
        <label for="name">Name:</label>
        <div class="input-container"><input type="text" id="name" placeholder="E.g., Kamal Perera" required></div>
    </div>
    <div class="form-group">
        <label for="designation">Designation:</label>
        <div class="input-container"><input type="text" id="designation" placeholder="E.g., Senior Accountant" required></div>
    </div>
    <div class="form-group">
        <label for="company">Company:</label>
        <div class="input-container"><input type="text" id="company" placeholder="E.g., Chesmi International (Pvt) Ltd" required></div>
    </div>
    <div class="form-group">
        <label for="department">Department:</label>
        <div class="input-container"><input type="text" id="department" placeholder="E.g., Finance / IT" required></div>
    </div>
    <div class="form-group">
        <label for="supervisor">Reporting Supervisor:</label>
        <div class="input-container"><input type="text" id="supervisor" placeholder="E.g., Mr. Rohan Silva (HOD)" required></div>
    </div>
    <div class="form-group">
        <label for="joiningDate">Joining Date:</label>
        <div class="input-container"><input type="date" id="joiningDate"></div>
    </div>
    <div class="form-group">
        <label for="resignationDate">Resignation Date:</label>
        <div class="input-container"><input type="date" id="resignationDate" placeholder="Optional for registration"></div>
    </div>
    <div class="form-group">
        <label for="email">Email Address:</label>
        <div class="input-container"><input type="email" id="email" placeholder="E.g., k.perera@chesmi.lk" required></div>
    </div>
    <div class="form-group">
        <label for="fingerId">Finger ID:</label>
        <div class="input-container"><input type="text" id="fingerId" placeholder="E.g., 4056 (To be filled by HR)"></div>
    </div>

    <h2>Access Requirements <span style="font-weight:400; font-size: 0.8em;">(Mark 'Yes' or 'No' - To be completed by IT)</span></h2>
    <table class="access-table">
        <thead>
            <tr>
                <th>Access Type</th>
                <th>Yes</th>
                <th>No</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Nav Access:</td>
                <td><input type="radio" name="navAccess" value="Yes"></td>
                <td><input type="radio" name="navAccess" value="No" checked></td>
            </tr>
            <tr>
                <td>QB Access (QuickBooks/Accounting):</td>
                <td><input type="radio" name="qbAccess" value="Yes"></td>
                <td><input type="radio" name="qbAccess" value="No" checked></td>
            </tr>
            <tr>
                <td>CRM App Access:</td>
                <td><input type="radio" name="crmAccess" value="Yes"></td>
                <td><input type="radio" name="crmAccess" value="No" checked></td>
            </tr>
            <tr>
                <td>Petty Cash App/FLEET APP Access:</td>
                <td><input type="radio" name="pettyFleetAccess" value="Yes"></td>
                <td><input type="radio" name="pettyFleetAccess" value="No" checked></td>
            </tr>
            <tr>
                <td>Shared Network Folder Access:</td>
                <td><input type="radio" name="shareFolderAccess" value="Yes"></td>
                <td><input type="radio" name="shareFolderAccess" value="No" checked></td>
            </tr>
            <tr>
                <td>Laptop Provisioning:</td>
                <td><input type="radio" name="laptopAccess" value="Yes"></td>
                <td><input type="radio" name="laptopAccess" value="No" checked></td>
            </tr>
            <tr>
                <td>Corporate Email Access:</td>
                <td><input type="radio" name="emailAccess" value="Yes"></td>
                <td><input type="radio" name="emailAccess" value="No" checked></td>
            </tr>
            <tr>
                <td>Biometric (Fingerprint) Access:</td>
                <td><input type="radio" name="fingerprintAccess" value="Yes"></td>
                <td><input type="radio" name="fingerprintAccess" value="No" checked></td>
            </tr>
            <tr>
                <td>Company Mobile Phone:</td>
                <td><input type="radio" name="mobilePhone" value="Yes"></td>
                <td><input type="radio" name="mobilePhone" value="No" checked></td>
            </tr>
            <tr>
                <td>Company SIM Card:</td>
                <td><input type="radio" name="simCard" value="Yes"></td>
                <td><input type="radio" name="simCard" value="No" checked></td>
            </tr>
        </tbody>
    </table>

    <div class="signature-block">
        <div class="signature-field">
            <div class="signature-line"></div>
            <p class="signature-label">Authorized by IT Department Signature</p>
        </div>
        <div class="signature-field">
            <div class="signature-line"></div>
            <p class="signature-label">Supervisor / Department Head Signature</p>
        </div>
    </div>
</form>

<div class="form-actions no-print">
    <button type="button" id="downloadPdfBtn">ðŸ’¾ Download as PDF</button>
    <button type="button" id="shareEmailBtn" class="email-btn">ðŸ“§ Share via Email</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
    window.onload = function () {
        const downloadBtn = document.getElementById('downloadPdfBtn');
        const shareBtn = document.getElementById('shareEmailBtn');

        downloadBtn.addEventListener('click', () => generatePdf('Chesmi-Employee-Registration.pdf'));
        shareBtn.addEventListener('click', () => shareViaEmail('New Employee Registration'));

        async function generatePdf(fileName) {
            const { jsPDF } = window.jspdf;
            const formToCapture = document.querySelector('.a4-page');
            
            // Add snapshot class to body for special styling
            document.body.classList.add('pdf-snapshot');

            const canvas = await html2canvas(formToCapture, {
                scale: 2,
                useCORS: true,
                logging: false
            });

            // Remove snapshot class
            document.body.classList.remove('pdf-snapshot');

            const imgData = canvas.toDataURL('image/png');
            const pdf = new jsPDF('p', 'mm', 'a4');
            const pdfWidth = pdf.internal.pageSize.getWidth();
            const pdfHeight = pdf.internal.pageSize.getHeight();
            
            pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
            pdf.save(fileName);
        }

        function shareViaEmail(formType) {
            const employeeName = document.getElementById('name').value || 'New Employee';
            const subject = `${formType} for ${employeeName}`;
            const body = `Dear Team,\n\nPlease find the ${formType} details attached for your review and processing.\n\nThis is a client-generated request. Please download the PDF from the form and attach it to this email before sending.\n\nThank you.`;
            
            window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        }
    };
</script>
</body>
</html>
